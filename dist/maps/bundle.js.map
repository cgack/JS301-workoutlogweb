{"version":3,"sources":["app.js","feed.js","define.js","log.js","auth.js"],"names":["$","document","ready","WorkoutLog","undefined","API_BASE","location","hostname","setAuthHeader","sessionToken","window","localStorage","setItem","ajaxSetup","headers","Authorization","ajax","type","url","then","data","username","jQuery","on","e","token","getItem","this","hasClass","preventDefault","target","attr","log","setDefinitions","setHistory","setFeed","which","is","trigger","socket","io","connect","addFeedItem","extend","feed","feedData","li","append","message","addClass","push","sendChat","emit","val","len","length","lis","i","children","remove","fetchAllFeeds","fetchFeeds","done","console","definition","userDefinitions","create","def","desc","postData","define","JSON","stringify","contentType","fail","fetchAll","err","workouts","defs","opts","id","description","history","result","itsLog","text","logger","fetchDefs","afterSignin","removeClass","signup","password","user","modal","show","login","loginout","removeItem"],"mappings":"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","file":"bundle.js","sourcesContent":["$(document).ready(function() {\r\n\tvar WorkoutLog = (function($, undefined) {\r\n\t\tvar API_BASE = location.hostname === \"localhost\" ?\r\n\t\t\t\"//localhost:3000/api/\" : \r\n\t\t\t\"//workoutapi-1150-cgack.herokuapp.com/api/\";\r\n\r\n\r\n\t\tvar setAuthHeader = function(sessionToken) {\r\n\t\t\twindow.localStorage.setItem(\"sessionToken\", sessionToken);\r\n\t\t\t\r\n\t\t\t$.ajaxSetup({\r\n\t\t\t\t\"headers\": {\r\n\t\t\t\t\t\"Authorization\": sessionToken\t\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\t$.ajax({\r\n\t\t\t\ttype: \"GET\",\r\n\t\t\t\turl: API_BASE + \"login\"\r\n\t\t\t}).then(function(data) {\r\n\t\t\t\tWorkoutLog.username = data;\r\n\t\t\t});\r\n\t\t};\r\n\r\n\t\treturn {\r\n\t\t\tAPI_BASE: API_BASE,\r\n\t\t\tsetAuthHeader: setAuthHeader\r\n\t\t};\r\n\t})(jQuery);\r\n\t\r\n\t// Ensure .disabled aren't clickable\r\n\t$(\".nav-tabs a[data-toggle=tab]\").on(\"click\", function(e) {\r\n\t  var token = window.localStorage.getItem(\"sessionToken\");\r\n\t  if ($(this).hasClass(\"disabled\") && !token) {\r\n\t     e.preventDefault();\r\n\t     return false;\r\n\t  }\r\n\t});\r\n\r\n\t// bind tab change events\r\n\t$(\"a[data-toggle=tab]\").on(\"shown.bs.tab\", function(e) {\r\n\t\tvar target = $(e.target).attr(\"href\");\r\n\t\tif (target === \"#log\") {\r\n\t\t\tWorkoutLog.log.setDefinitions();\r\n\t\t}\r\n\t\tif (target === \"#history\") {\r\n\t\t\tWorkoutLog.log.setHistory();\r\n\t\t}\r\n\t\tif (target === \"#feed\") {\r\n\t\t\tWorkoutLog.setFeed();\r\n\t\t}\r\n\t});\r\n\r\n  // bind enter key\r\n   $(document).on(\"keypress\", function(e) {\r\n      if (e.which === 13) { // enter key\r\n         if ($(\"#signup-modal\").is(\":visible\")) {\r\n            $(\"#signup\").trigger(\"click\");\r\n         }\r\n         if ($(\"#login-modal\").is(\":visible\")) {\r\n            $(\"#login\").trigger(\"click\");\r\n         }\r\n      }\r\n   });\r\n\r\n\tvar token = window.localStorage.getItem(\"sessionToken\");\r\n\tif (token) {\r\n\t\tWorkoutLog.setAuthHeader(token);\r\n\t}\r\n\r\n\twindow.WorkoutLog = WorkoutLog;\r\n\r\n\tWorkoutLog.socket = io.connect(\"http://localhost:3000\");\r\n\r\n\tWorkoutLog.socket.on(\"new log\", function(data) {\r\n\t\tWorkoutLog.addFeedItem(data);\r\n\t});\r\n\r\n\tWorkoutLog.socket.on(\"chat-message\", function(data) {\r\n\t\tWorkoutLog.addFeedItem(data);\r\n\t});\r\n\r\n});","$(function() {\r\n\t$.extend(WorkoutLog, {\r\n\t\tfeed: [],\r\n\t\taddFeedItem: function(feedData) {\r\n\t\t\tvar li = $(\"<li>\").append(feedData.username + feedData.message);\r\n\t\t\tli.addClass(\"list-group-item\");\r\n\t\t\t$(\"#feed-list\").append(li);\r\n\t\t\tWorkoutLog.feed.push(feedData);\r\n\t\t},\r\n\t\tsendChat: function() {\r\n\t\t\tWorkoutLog.socket.emit(\"chat-message\", {\r\n\t\t\t\tusername: WorkoutLog.username,\r\n\t\t\t\tmessage: \" says \" + $(\"#msg\").val()\r\n\t\t\t});\r\n\r\n\t\t\t$(\"#msg\").val(\"\");\r\n\t\t},\r\n\t\tsetFeed: function() {\r\n\t\t\tvar feed = WorkoutLog.feed;\r\n\t\t\tvar len = feed.length;\r\n\t\t\tvar lis = \"\";\r\n\t\t\tfor (var i = 0; i < len; i++) {\r\n\t\t\t\tlis += \"<li class='list-group-item'>\";\r\n\t\t\t\tlis += feed[i].username + feed[i].message;\r\n\t\t\t\tlis += \"</li>\";\t\r\n\t\t\t}\r\n\t\t\t$(\"#feed-list\").children().remove();\r\n\t\t\t$(\"#feed-list\").append(lis);\r\n\t\t},\r\n\t\tfetchAllFeeds: function() {\r\n\r\n\t\t\tvar fetchFeeds = $.ajax({\r\n\t\t\t\ttype: \"GET\",\r\n\t\t\t\turl: WorkoutLog.API_BASE + \"feed\",\r\n\t\t\t\theaders: {\r\n\t\t\t\t\t\"Authorization\": window.localStorage.getItem(\"sessionToken\")\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tfetchFeeds.done(function(data) {\r\n\t\t\t\tconsole.log(data);\t\r\n\t\t\t\tWorkoutLog.feed = data;\r\n\t\t\t});\r\n\t\t}\r\n\t});\r\n\r\n\t$(\"#msg-send\").on(\"click\", WorkoutLog.sendChat);\r\n\r\n\tif (window.localStorage.getItem(\"sessionToken\")) {\r\n\t\tWorkoutLog.fetchAllFeeds();\r\n\t}\r\n});","$(function() {\r\n\t$.extend(WorkoutLog,{\r\n\t\tdefinition: {\r\n\t\t\tuserDefinitions: [],\r\n\t\t\tcreate: function() {\r\n\t\t\t\tvar def = {\r\n\t\t\t\t\tdesc: $(\"#def-description\").val(),\r\n\t\t\t\t\ttype: $(\"#def-logtype\").val()\r\n\t\t\t\t};\r\n\t\t\t\tvar postData = { definition: def };\r\n\t\t\t\tvar define = $.ajax({\r\n\t\t\t\t\ttype: \"POST\",\r\n\t\t\t\t\turl: WorkoutLog.API_BASE + \"definition\",\r\n\t\t\t\t\tdata: JSON.stringify(postData),\r\n\t\t\t\t\tcontentType: 'application/json'\r\n\t\t\t\t});\r\n\r\n\t\t\t\tdefine.done(function(data) {\r\n\t\t\t\t\tWorkoutLog.definition.userDefinitions.push(data.definition);\r\n\t\t\t\t});\r\n\r\n\t\t\t\tdefine.fail(function() {\r\n\t\t\t\t\tconsole.log('oh no');\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tfetchAll: function() {\r\n\t\t\t\tvar getDefs = $.ajax({\r\n\t\t\t\t\ttype: \"GET\",\r\n\t\t\t\t\turl: WorkoutLog.API_BASE + \"definition\",\r\n\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t\"Authorization\": window.localStorage.getItem(\"sessionToken\")\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.done(function(data) {\r\n\t\t\t\t\tWorkoutLog.definition.userDefinitions = data;\r\n\t\t\t\t})\r\n\t\t\t\t.fail(function(err) {\r\n\t\t\t\t\tconsole.log(err);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\t$(\"#def-save\").on(\"click\", WorkoutLog.definition.create);\r\n\r\n\tif (window.localStorage.getItem(\"sessionToken\")) {\r\n\t\tWorkoutLog.definition.fetchAll();\r\n\t}\r\n});","$(function() { // same as $(document).ready(function() {\r\n\t$.extend(WorkoutLog, {\r\n\t\tlog: {\r\n\t\t\tworkouts: [],\r\n\t\t\t\r\n\t\t\tsetDefinitions: function() {\r\n\t\t\t\tvar defs = WorkoutLog.definition.userDefinitions;\r\n\t\t\t\tvar len = defs.length;\r\n\t\t\t\tvar opts = \"\";\r\n\t\t\t\tfor (var i = 0; i < len; i++) {\r\n\t\t\t\t\topts += \"<option value='\" + defs[i].id + \"'>\" + defs[i].description + \"</option>\";\r\n\t\t\t\t}\r\n\t\t\t\t$(\"#log-definition\").children().remove();\r\n\t\t\t\t$(\"#log-definition\").append(opts);\r\n\t\t\t},\r\n\r\n\t\t\tsetHistory: function() {\r\n\t\t\t\tvar history = WorkoutLog.log.workouts;\r\n\t\t\t\tvar len = history.length;\r\n\t\t\t\tvar lis = \"\";\r\n\t\t\t\tfor (var i = 0; i < len; i++) {\r\n\t\t\t\t\tvar result = history[i].result === \"\" ? \"No result found\" : history[i].result;\r\n\t\t\t\t\tlis += \"<li class='list-group-item'>\" + history[i].def + \" - \" + result + \"</li>\";\r\n\t\t\t\t}\r\n\t\t\t\t$(\"#history-list\").children().remove();\r\n\t\t\t\t$(\"#history-list\").append(lis);\r\n\t\t\t},\r\n\r\n\t\t\tcreate: function() {\r\n\t\t\t\tvar itsLog = {\r\n\t\t\t\t\tdesc: $(\"#log-description\").val(),\r\n\t\t\t\t\tresult: $(\"#log-result\").val(),\r\n\t\t\t\t\tdef: $(\"#log-definition option:selected\").text()\r\n\t\t\t\t};\r\n\r\n\t\t\t\tvar postData = { log: itsLog };\r\n\t\t\t\tvar logger = $.ajax({\r\n\t\t\t\t\ttype: \"POST\",\r\n\t\t\t\t\turl: WorkoutLog.API_BASE + \"log\",\r\n\t\t\t\t\tdata: JSON.stringify(postData),\r\n\t\t\t\t\tcontentType: \"application/json\"\r\n\t\t\t\t});\r\n\r\n\t\t\t\tlogger.done(function(data) {\r\n\t\t\t\t\tWorkoutLog.log.workouts.push(data);\r\n\t\t\t\t});\r\n\r\n\t\t\t\tlogger.fail(function() {\r\n\t\t\t\t\tconsole.log(\"something broke\");\r\n\t\t\t\t});\r\n\r\n\t\t\t},\r\n\r\n\t\t\tfetchAll: function() {\r\n\t\t\t\tvar fetchDefs = $.ajax({\r\n\t\t\t\t\ttype: \"GET\",\r\n\t\t\t\t\turl: WorkoutLog.API_BASE + \"log\",\r\n\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t\"Authorization\": window.localStorage.getItem(\"sessionToken\")\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tfetchDefs.done(function(data) {\r\n\t\t\t\t\tWorkoutLog.log.workouts = data;\r\n\t\t\t\t});\r\n\r\n\t\t\t\tfetchDefs.fail(function(err) {\r\n\t\t\t\t\tconsole.log(\"an error occured\" + err.message);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\t$(\"#log-save\").on(\"click\", WorkoutLog.log.create);\r\n\r\n\tif (window.localStorage.getItem(\"sessionToken\")) {\r\n\t\tWorkoutLog.log.fetchAll();\r\n\t}\r\n});","$(function() {\r\n\t$.extend(WorkoutLog, {\r\n\t\tafterSignin: function(sessionToken) {\r\n\t\t\tWorkoutLog.setAuthHeader(sessionToken);\r\n\t\t\tWorkoutLog.definition.fetchAll();\r\n\t\t\tWorkoutLog.log.fetchAll();\r\n\t\t\tWorkoutLog.fetchAllFeeds();\r\n\t\t\t$(\".disabled\").removeClass(\"disabled\");\r\n\t\t\t$(\"#loginout\").text(\"Logout\");\r\n\t\t},\r\n\t\tsignup: function() {\r\n\t\t\tvar username = $(\"#su_username\").val();\r\n\t\t\tvar password = $(\"#su_password\").val();\r\n\t\t\tvar user = { \r\n\t\t\t\tuser: { \r\n\t\t\t\t\tusername: username,\r\n\t\t\t\t\tpassword: password \r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tvar signup = $.ajax({\r\n\t\t\t\ttype: \"POST\",\r\n\t\t\t\turl: WorkoutLog.API_BASE + \"user\",\r\n\t\t\t\tdata: JSON.stringify( user ),\r\n\t\t\t\tcontentType: \"application/json\"\r\n\t\t\t});\r\n\r\n\t\t\tsignup.done(function(data) {\r\n\t\t\t\tif (data.sessionToken) {\r\n\t\t\t\t\tWorkoutLog.afterSignin(data.sessionToken);\r\n\t\t\t\t\t$(\"#signup-modal\").modal(\"hide\");\r\n\t\t\t\t}\r\n\r\n\t\t\t}).fail(function() {\r\n\t\t\t\t$(\"#su_error\").text(\"There was an issue with sign up\").show();\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\tlogin: function() {\r\n\t\t\tvar username = $(\"#li_username\").val();\r\n\t\t\tvar password = $(\"#li_password\").val();\r\n\t\t\tvar user = { \r\n\t\t\t\tuser: { \r\n\t\t\t\t\tusername: username,\r\n\t\t\t\t\tpassword: password \r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tvar login = $.ajax({\r\n\t\t\t\ttype: \"POST\",\r\n\t\t\t\turl: WorkoutLog.API_BASE + \"login\",\r\n\t\t\t\tdata: JSON.stringify( user ),\r\n\t\t\t\tcontentType: \"application/json\"\r\n\t\t\t});\r\n\r\n\t\t\tlogin.done(function(data) {\r\n\t\t\t\tif (data.sessionToken) {\r\n\t\t\t\t\tWorkoutLog.afterSignin(data.sessionToken);\r\n\t\t\t\t\t$(\"#login-modal\").modal(\"hide\");\r\n\t\t\t\t}\r\n\t\t\t}).fail(function() {\r\n\t\t\t\t$(\"#li_error\").text(\"There was an issue with sign up\").show();\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\tloginout: function() {\r\n\t\t\tif (window.localStorage.getItem(\"sessionToken\")) {\r\n\t\t\t\twindow.localStorage.removeItem(\"sessionToken\");\r\n\t\t\t\t$(\"#loginout\").text(\"Login\");\r\n\t\t\t}\r\n\r\n\t\t\t// TODO: on logout make sure stuff is disabled\r\n\t\t}\t\r\n\t});\r\n\r\n\t// bind events\r\n\t$(\"#login\").on(\"click\", WorkoutLog.login);\r\n\t$(\"#signup\").on(\"click\", WorkoutLog.signup);\r\n\t$(\"#loginout\").on(\"click\", WorkoutLog.loginout);\r\n\r\n\tif (window.localStorage.getItem(\"sessionToken\")) {\r\n\t\t$(\"#loginout\").text(\"Logout\");\r\n\t}\r\n});\r\n\r\n"],"sourceRoot":"/source/"}